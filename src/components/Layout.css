.app-layout {
  display: grid;
  grid-template-columns: 260px 1fr 320px; /* Fixed Left, Fluid Center, Fixed Right */
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  gap: 16px; /* Tighter gap */
  padding: 16px; /* Balanced padding */
  box-sizing: border-box;
  /* Centering Fix: Use max-width on container if screen is ultra wide */
  justify-content: center; 
  /* Removed align-content: center to prevent vertical collapse */
  grid-template-rows: 1fr; /* Force row to fill height */
  max-width: 1400px; /* Optimal reading width */
  margin: 0 auto; /* Center the grid wrapper */
}

.layout-sidebar {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow-y: auto;
  border-radius: 24px;
}

.layout-sidebar.left {
    background: rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.layout-sidebar.right {
    background: rgba(255, 255, 255, 0.5); /* Slightly more opaque for details */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: -5px 0 20px rgba(0,0,0,0.05);
}

.layout-main {
  display: flex;
  justify-content: center;
  align-items: stretch; /* Force full height to prevent jitter */
  overflow-y: hidden; /* Main scroll handled by inner panels if needed, but Calendar fits screen */
  padding: 0 10px; 
  height: 100%; /* Ensure it fills parent grid cell */
}

/* Mobile Responsive */
@media (max-width: 1100px) {
    .app-layout {
        grid-template-columns: 80px 1fr 300px; /* Small icon nav */
    }
}

@media (max-width: 900px) {
    .app-layout {
        grid-template-columns: 1fr; /* Stacked */
        padding: 10px;
        gap: 10px;
        height: auto;
        min-height: 100vh;
        overflow-y: auto;
    }
    
    .layout-sidebar.left {
        display: none; /* In mobile, we might use a drawer */
    }
    
    .layout-sidebar.right {
        position: fixed;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 100;
        transform: translateX(100%);
        transition: transform 0.3s;
    }
    
    .layout-sidebar.right.open {
        transform: translateX(0);
    }
}
